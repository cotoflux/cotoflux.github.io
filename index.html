<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Serif+Pro&display=swap" rel="stylesheet">
    <title>Nuria Puig Portfolio</title>

</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="activities.html">Activities</a></li>
            </ul>
        </nav>
        <div class="slider">
			<ul>
			    <li>
                    <h2> Bienvenido a mi portfolio web! Mi objetivo con esta página es mostrar mi evolución</h2>
                </li>
                <li>
                    <h2>Cada semana dedico muchas horas a mi consolidar conocimiento y mi Git crece día a día...</h2>
                </li>
        		<li>
                    <h2> Así pues cada semana quiero compartir proyectos de los que he aprendido. </h2>
        		</li>
				<li>
                    <h2>Si quieres ponerte en contacto conmigo tines mi Git y mi Linkedin en la página!!</h2>
                </li>
			</ul>
		</div>
    </header>
    <main>
        <section>

            <h1>Núria Puig</h1>
            <p>Fullstack Developer</p>

        </section>


    </main>

<hr>    
<form action="javascript:void(0);" method="POST" onsubmit="app.Add()"> 
        <input type="text" id="add-name" placeholder="New task">
        <input type="submit" value="Add">
      </form>
      
      <div id="spoiler" role="aria-hidden">
        <form action="javascript:void(0);" method="POST" id="saveEdit">
          <input type="text" id="editTask">
          <input type="submit" value="Edit" /> <a onclick="CloseInput()" aria-label="Close">&#10006;</a>
        </form>
      </div>
      
      <p id="counter"></p>
      
      <table>
        <tr>
          <th>Mis tareas para esta semana</th>
        </tr>
          <tbody id="myTasks">
          </tbody>
      </table>
      
      <script>
      var app = new function() {
        this.el = document.getElementById('myTasks');
        this.myTasks = ['terminar mokup de la primera version', 'estudio JavaScrip para añadir movimiento al item '];
        this.Count = function(data) {
          var el   = document.getElementById('counter');
          var name = 'weekTask';
          if (data) {
            if (data > 1) {
              name = 'tasks';
            }
            el.innerHTML = data + ' ' + name ;
          } else {
            el.innerHTML = 'No ' + name;
          }
        };
        
        this.FetchAll = function() {
          var data = '';
          if (this.myTasks.length > 0) {
            for (i = 0; i < this.myTasks.length; i++) {
              data += '<tr>';
              data += '<td>' + this.myTasks[i] + '</td>';
              data += '<td><button onclick="app.Edit(' + i + ')">Edit</button></td>';
              data += '<td><button onclick="app.Delete(' + i + ')">Delete</button></td>';
              data += '</tr>';
            }
          }
          this.Count(this.myTasks.length);
          return this.el.innerHTML = data;
        };
        this.Add = function () {
          el = document.getElementById('add-name');
          // Get the value
          var weekTask = el.value;
          if (weekTask) {
            // Add the new value
            this.myTasks.push(weekTask.trim());
            // Reset input value
            el.value = '';
            // Dislay the new list
            this.FetchAll();
          }
        };
        this.Edit = function (item) {
          var el = document.getElementById('editTask');
          // Display value in the field
          el.value = this.myTasks[item];
          // Display fields
          document.getElementById('spoiler').style.display = 'block';
          self = this;
          document.getElementById('saveEdit').onsubmit = function() {
            // Get value
            var weekTask = el.value;
            if (weekTask) {
              // Edit value
              self.myTasks.splice(item, 1, weekTask.trim());
              // Display the new list
              self.FetchAll();
              // Hide fields
              CloseInput();
            }
          }
        };
        this.Delete = function (item) {
          // Delete the current row
          this.myTasks.splice(item, 1);
          // Display the new list
          this.FetchAll();
        };
        
      }
      app.FetchAll();
      function CloseInput() {
        document.getElementById('spoiler').style.display = 'none';
      }
      </script>
    <hr>
    <footer>
        <div class="social">
            <h4>Datos de contacto</h4>
            <ul>
                <li><a href="https://github.com/cotoflux">GitHub</a></li>
                <li><a href="https://www.linkedin.com/in/nuria-puig-riera/">LinkedIn</a></li>
            </ul>
        </div>
    </footer>

</body>
</html>